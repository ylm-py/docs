"use strict";(self.webpackChunkcontabo_docs=self.webpackChunkcontabo_docs||[]).push([[1629],{3905:(e,t,o)=>{o.d(t,{Zo:()=>c,kt:()=>d});var a=o(7294);function r(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function n(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,a)}return o}function s(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?n(Object(o),!0).forEach((function(t){r(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):n(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function i(e,t){if(null==e)return{};var o,a,r=function(e,t){if(null==e)return{};var o,a,r={},n=Object.keys(e);for(a=0;a<n.length;a++)o=n[a],t.indexOf(o)>=0||(r[o]=e[o]);return r}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(a=0;a<n.length;a++)o=n[a],t.indexOf(o)>=0||Object.prototype.propertyIsEnumerable.call(e,o)&&(r[o]=e[o])}return r}var p=a.createContext({}),l=function(e){var t=a.useContext(p),o=t;return e&&(o="function"==typeof e?e(t):s(s({},t),e)),o},c=function(e){var t=l(e.components);return a.createElement(p.Provider,{value:t},e.children)},m={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},u=a.forwardRef((function(e,t){var o=e.components,r=e.mdxType,n=e.originalType,p=e.parentName,c=i(e,["components","mdxType","originalType","parentName"]),u=l(o),d=r,h=u["".concat(p,".").concat(d)]||u[d]||m[d]||n;return o?a.createElement(h,s(s({ref:t},c),{},{components:o})):a.createElement(h,s({ref:t},c))}));function d(e,t){var o=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var n=o.length,s=new Array(n);s[0]=u;var i={};for(var p in t)hasOwnProperty.call(t,p)&&(i[p]=t[p]);i.originalType=e,i.mdxType="string"==typeof e?e:r,s[1]=i;for(var l=2;l<n;l++)s[l]=o[l];return a.createElement.apply(null,s)}return a.createElement.apply(null,o)}u.displayName="MDXCreateElement"},6989:(e,t,o)=>{o.r(t),o.d(t,{assets:()=>p,contentTitle:()=>s,default:()=>m,frontMatter:()=>n,metadata:()=>i,toc:()=>l});var a=o(7462),r=(o(7294),o(3905));const n={title:"Using S3 Object Storage programatically",sidebar_position:12},s="How to use use S3 Object Storage in your code",i={unversionedId:"products/Object-Storage/HowTo/programming",id:"products/Object-Storage/HowTo/programming",title:"Using S3 Object Storage programatically",description:"Please note that Contabo doesn't offer any support for coding / programming issues due to its complexity.",source:"@site/docs/products/Object-Storage/HowTo/programming.md",sourceDirName:"products/Object-Storage/HowTo",slug:"/products/Object-Storage/HowTo/programming",permalink:"/docs/products/Object-Storage/HowTo/programming",draft:!1,editUrl:"https://github.com/contabo/docs/tree/main/docs/products/Object-Storage/HowTo/programming.md",tags:[],version:"current",sidebarPosition:12,frontMatter:{title:"Using S3 Object Storage programatically",sidebar_position:12},sidebar:"productSidebar",previous:{title:"Setup Custom Domain",permalink:"/docs/products/Object-Storage/HowTo/custom-domain"},next:{title:"General Compatibility",permalink:"/docs/products/Object-Storage/Tools/compatibility"}},p={},l=[{value:"General",id:"general",level:2},{value:"Examples",id:"examples",level:3},{value:"Python",id:"python",level:4}],c={toc:l};function m(e){let{components:t,...o}=e;return(0,r.kt)("wrapper",(0,a.Z)({},c,o,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"how-to-use-use-s3-object-storage-in-your-code"},"How to use use S3 Object Storage in your code"),(0,r.kt)("admonition",{title:"No support",type:"danger"},(0,r.kt)("p",{parentName:"admonition"},"Please note that Contabo doesn't offer any support for coding / programming issues due to its complexity."),(0,r.kt)("p",{parentName:"admonition"},"Following information are hints on how to achieve it, without meant to be a step by step guide.")),(0,r.kt)("h2",{id:"general"},"General"),(0,r.kt)("p",null,"The S3 Object Storage API is not documented in Contabo documentation."),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"The S3 Object Storage API was defined by Amazon AWS more than 10 years ago and is maintained by them. Please refer to ",(0,r.kt)("a",{parentName:"li",href:"https://docs.aws.amazon.com/AmazonS3/latest/API/Welcome.html"},"https://docs.aws.amazon.com/AmazonS3/latest/API/Welcome.html")),(0,r.kt)("li",{parentName:"ul"},"Not all features of Amazon S3 are obvioulsy supported. Please refer to ",(0,r.kt)("a",{parentName:"li",href:"https://docs.ceph.com/en/latest/radosgw/s3/"},"https://docs.ceph.com/en/latest/radosgw/s3/")),(0,r.kt)("li",{parentName:"ul"},"The API documented at ",(0,r.kt)("a",{parentName:"li",href:"https://api.contabo.com/#tag/Object-Storages"},"https://api.contabo.com/#tag/Object-Storages")," is not the S3 Object Storage API. It is mainly about to purchase and enlarge the storage size. For uploading / downloading files and folders and manage buckets please use the S3 Object Storage API."),(0,r.kt)("li",{parentName:"ul"},"It is in general not encouraged to perfrom the S3 Object Storage API calls directly e.g. via curl. As the S3 API is based on ",(0,r.kt)("a",{parentName:"li",href:"https://en.wikipedia.org/wiki/HMAC"},"HMAC")," please use S3 SDK libraries which are present for many programming language. Please refer to ",(0,r.kt)("a",{parentName:"li",href:"https://aws.amazon.com/developer/tools/"},"https://aws.amazon.com/developer/tools/")," or perform an internet search for alternatives.")),(0,r.kt)("h3",{id:"examples"},"Examples"),(0,r.kt)("p",null,"Here are some examples where the integration was made:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://github.com/contabo/cntb"},"cntb")," written in ",(0,r.kt)("a",{parentName:"li",href:"https://go.dev/"},"Go")," and using the ",(0,r.kt)("a",{parentName:"li",href:"https://github.com/minio/minio-go"},"minio")," library"),(0,r.kt)("li",{parentName:"ul"},"External article on ",(0,r.kt)("a",{parentName:"li",href:"https://dev.to/einlinuus/use-contabo-object-storage-with-nodejs-5b9l"},"dev.to")," using ",(0,r.kt)("a",{parentName:"li",href:"https://nodejs.org/en/"},"NodeJS")," and ",(0,r.kt)("a",{parentName:"li",href:"https://www.python.org/"},"Python")),(0,r.kt)("li",{parentName:"ul"},"External repository by ",(0,r.kt)("a",{parentName:"li",href:"https://github.com/lucafulgenzi/contabo-object-storage-api"},"lucafulgenzi")," using ",(0,r.kt)("a",{parentName:"li",href:"https://spring.io/"},"SpringBoot")),(0,r.kt)("li",{parentName:"ul"},"Ceph Object Gateway docs include examples for ",(0,r.kt)("a",{parentName:"li",href:"https://docs.ceph.com/en/latest/radosgw/s3/cpp/"},"C++"),", ",(0,r.kt)("a",{parentName:"li",href:"https://docs.ceph.com/en/latest/radosgw/s3/csharp/"},"C#"),", ",(0,r.kt)("a",{parentName:"li",href:"https://docs.ceph.com/en/latest/radosgw/s3/java/"},"Java"),", ",(0,r.kt)("a",{parentName:"li",href:"https://docs.ceph.com/en/latest/radosgw/s3/perl/"},"Perl"),", ",(0,r.kt)("a",{parentName:"li",href:"https://docs.ceph.com/en/latest/radosgw/s3/php/"},"PHP"),", ",(0,r.kt)("a",{parentName:"li",href:"https://docs.ceph.com/en/latest/radosgw/s3/python/"},"Python")," and ",(0,r.kt)("a",{parentName:"li",href:"https://docs.ceph.com/en/latest/radosgw/s3/ruby/#ruby-aws-s3-examples-aws-s3-gem"},"Ruby"))),(0,r.kt)("h4",{id:"python"},"Python"),(0,r.kt)("p",null,"using ",(0,r.kt)("a",{parentName:"p",href:"https://pypi.org/project/boto3/"},"boto3")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},"from os import path\nimport boto3\nimport humanize\n\ns3 = boto3.client('s3',\n                  endpoint_url='https://eu2.contabostorage.com',\n                  aws_access_key_id='<your access_key here>',\n                  aws_secret_access_key='<your_secret_key_here>')\n\n# list accessible buckets\nresponse = s3.list_buckets()\nfor bucket in response['Buckets']:\n    print(bucket['Name'])\n\n# list bucket contents, optionally filtered by prefix=path\nbucket_name = \"<bucket_name>\"\nresponse = s3.list_objects_v2(Bucket=bucket_name, Prefix='')\nfor file in response['Contents']:\n  signed_url = s3.generate_presigned_url(ClientMethod='get_object', Params={'Bucket': bucket_name, 'Key': file['Key']})\n  name = path.basename(file['Key'])\n  size = humanize.naturalsize(file[\"Size\"])\n  print(name, size, signed_url)\n")),(0,r.kt)("p",null,"using ",(0,r.kt)("a",{parentName:"p",href:"https://s3fs.readthedocs.io/en/latest/#s3-compatible-storage"},"s3fs")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},"from os import environ as env\nimport s3fs\n\nfs = s3fs.S3FileSystem(\n  key='<your access_key here>',\n  secret=env.get('CONTABO_SECRET_KEY', '<your_secret_key_here>'),\n  endpoint_url='https://eu2.contabostorage.com'\n)\n\nfs.ls('my-bucket')\n# ['my-file.txt']\n\nwith fs.open('my-bucket/my-file.txt', 'rb') as f:\n    print(f.read())\n# b'Hello, world'\n")))}m.isMDXComponent=!0}}]);